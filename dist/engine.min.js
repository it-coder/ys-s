//version=1.2
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Engine",[],t):"object"==typeof exports?exports.Engine=t():e.Engine=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=48)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(21).default,o=n(6);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(10),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(47);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(5);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(5),o=n(36),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=n(14)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c}).call(this,n(35))},function(e,t,n){"use strict";var r=n(5),o=n(37),i=n(39),a=n(11),s=n(40),c=n(43),u=n(44),l=n(15);e.exports=function(e){return new Promise((function(t,n){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"],(r.isBlob(f)||r.isFile(f))&&f.type&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",y=unescape(encodeURIComponent(e.auth.password))||"";d.Authorization="Basic "+btoa(h+":"+y)}var v=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};o(t,n,i),p=null}},p.onabort=function(){p&&(n(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||u(v))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&r.forEach(d,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),f||(f=null),p.send(f)}))}},function(e,t,n){"use strict";var r=n(38);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t){t=t||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(e[o],t[o])}r.forEach(o,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(i,u),r.forEach(a,(function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(void 0,t[o])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=o.concat(i).concat(a).concat(s),f=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(f,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(22),o=n(23),i=n(24),a=n(26);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(0),o=n(8),i=n(27),a=n(28);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){e.exports=n(30)},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(25);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8),o=n(29);function i(t,n,a){return o()?(e.exports=i=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(5),o=n(10),i=n(31),a=n(16);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=s(n(13));c.Axios=i,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(17),c.CancelToken=n(45),c.isCancel=n(12),c.all=function(e){return Promise.all(e)},c.spread=n(46),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(5),o=n(11),i=n(32),a=n(33),s=n(16);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(5);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";var r=n(5),o=n(34),i=n(12),a=n(13);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(15);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(5);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(41),o=n(42);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(5),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(5);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(17);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(2),a=n.n(i),s=n(6),c=n.n(s),u=n(3),l=n.n(u),f=n(4),d=n.n(f),p=n(0),h=n.n(p),y=n(18),v=n.n(y),g=n(19),m=n.n(g);var w=function(e){e=e||{};var t,n=this;this.cfg=e.peerConnectionOptions||{},this.cfg.sdpSemantics="unified-plan",this.pcClient=null,this.dcClient=null,this.tnClient=null,this.debug=e.debug||!1,this.sdpConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1},this.dataChannelOptions={ordered:!0},this.video=((t=document.createElement("video")).id="streamingVideo",t.playsInline=!0,t.style.cssText="object-fit: contain;",t.muted="muted",t.addEventListener("loadedmetadata",(function(){n.onVideoInitialised&&n.onVideoInitialised()}),!0),t.addEventListener("contextmenu",(function(e){e.preventDefault()})),t);var r=function(e){n.debug&&console.info("signaling state change:",e)},o=function(e){n.debug&&console.info("ice connection state change:",e)},i=function(e){n.debug&&console.info("ice gathering state change:",e)},a=function(e){n.debug&&console.log("handleOnTrack",e.streams),n.video.srcObject!==e.streams[0]&&(n.debug&&console.log("setting video stream from ontrack"),n.video.srcObject=e.streams[0])},s=function(e){n.debug&&console.log("ICE candidate",e),e.candidate&&e.candidate.candidate&&n.onWebRtcCandidate(e.candidate)};this.handleCandidateFromServer=function(e){n.debug&&console.log("ICE candidate: ",e);var t=new RTCIceCandidate(e);n.pcClient.addIceCandidate(t).then((function(e){n.debug&&console.log("ICE candidate successfully added")}))},this.createOffer=function(){var e;n.pcClient&&(n.debug&&console.log("Closing existing PeerConnection"),n.pcClient.close(),n.pcClient=null),n.pcClient=new RTCPeerConnection(n.cfg),(e=n.pcClient).SetBitrate&&n.debug&&console.log("Hurray! there's RTCPeerConnection.SetBitrate function"),e.onsignalingstatechange=r,e.oniceconnectionstatechange=o,e.onicegatheringstatechange=i,e.ontrack=a,e.onicecandidate=s,n.dcClient=function(e,t,r){try{var o=e.createDataChannel(t,r);return n.debug&&console.log("Created datachannel (".concat(t,")")),o.onopen=function(e){n.debug&&console.log("data channel (".concat(t,") connect")),n.onDataChannelConnected&&n.onDataChannelConnected()},o.onclose=function(e){n.debug&&console.log("data channel (".concat(t,") closed"))},o.onmessage=function(e){n.onDataChannelMessage&&n.onDataChannelMessage(e.data)},o}catch(e){return n.debug&&console.warn("No data channel",e),null}}(n.pcClient,"cirrus",n.dataChannelOptions),function(e){e.createOffer(n.sdpConstraints).then((function(t){e.setLocalDescription(t),n.onWebRtcOffer&&(t.sdp=t.sdp.replace(/(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm,"$1;x-google-start-bitrate=10000;x-google-max-bitrate=20000\r\n"),n.onWebRtcOffer(t))}),(function(){n.debug&&console.warn("Couldn't create offer")}))}(n.pcClient)},this.receiveAnswer=function(e){n.debug&&console.log("Received answer:\n".concat(e));var t=new RTCSessionDescription(e);n.pcClient.setRemoteDescription(t)},this.close=function(){n.pcClient&&(n.debug&&console.log("Closing existing peerClient"),n.pcClient.close(),n.pcClient=null),n.aggregateStatsIntervalId&&clearInterval(n.aggregateStatsIntervalId)},this.send=function(e){n.dcClient&&"open"==n.dcClient.readyState&&n.dcClient.send(e)},this.getStats=function(e){n.pcClient&&e&&n.pcClient.getStats(null).then((function(t){e(t)}))},this.aggregateStats=function(e){var t=(n.aggregatedStats||(n.aggregatedStats={}),function(e){var t={};n.debug&&console.log("----------------------------- Stats start -----------------------------"),e.forEach((function(e){"inbound-rtp"!=e.type||e.isRemote||"video"!=e.mediaType&&!e.id.toLowerCase().includes("video")||(t.timestamp=e.timestamp,t.bytesReceived=e.bytesReceived,t.framesDecoded=e.framesDecoded,t.packetsLost=e.packetsLost,t.bytesReceivedStart=n.aggregatedStats&&n.aggregatedStats.bytesReceivedStart?n.aggregatedStats.bytesReceivedStart:e.bytesReceived,t.framesDecodedStart=n.aggregatedStats&&n.aggregatedStats.framesDecodedStart?n.aggregatedStats.framesDecodedStart:e.framesDecoded,t.timestampStart=n.aggregatedStats&&n.aggregatedStats.timestampStart?n.aggregatedStats.timestampStart:e.timestamp,n.aggregatedStats&&n.aggregatedStats.timestamp&&(n.aggregatedStats.bytesReceived&&(t.bitrate=8*(t.bytesReceived-n.aggregatedStats.bytesReceived)/(t.timestamp-n.aggregatedStats.timestamp),t.bitrate=Math.floor(t.bitrate),t.lowBitrate=n.aggregatedStats.lowBitrate&&n.aggregatedStats.lowBitrate<t.bitrate?n.aggregatedStats.lowBitrate:t.bitrate,t.highBitrate=n.aggregatedStats.highBitrate&&n.aggregatedStats.highBitrate>t.bitrate?n.aggregatedStats.highBitrate:t.bitrate),n.aggregatedStats.bytesReceivedStart&&(t.avgBitrate=8*(t.bytesReceived-n.aggregatedStats.bytesReceivedStart)/(t.timestamp-n.aggregatedStats.timestampStart),t.avgBitrate=Math.floor(t.avgBitrate)),n.aggregatedStats.framesDecoded&&(t.framerate=(t.framesDecoded-n.aggregatedStats.framesDecoded)/((t.timestamp-n.aggregatedStats.timestamp)/1e3),t.framerate=Math.floor(t.framerate),t.lowFramerate=n.aggregatedStats.lowFramerate&&n.aggregatedStats.lowFramerate<t.framerate?n.aggregatedStats.lowFramerate:t.framerate,t.highFramerate=n.aggregatedStats.highFramerate&&n.aggregatedStats.highFramerate>t.framerate?n.aggregatedStats.highFramerate:t.framerate),n.aggregatedStats.framesDecodedStart&&(t.avgframerate=(t.framesDecoded-n.aggregatedStats.framesDecodedStart)/((t.timestamp-n.aggregatedStats.timestampStart)/1e3),t.avgframerate=Math.floor(t.avgframerate)))),"track"!=e.type||"video_label"!=e.trackIdentifier&&"video"!=e.kind||(t.framesDropped=e.framesDropped,t.framesReceived=e.framesReceived,t.framesDroppedPercentage=e.framesDropped/e.framesReceived*100,t.frameHeight=e.frameHeight,t.frameWidth=e.frameWidth,t.frameHeightStart=n.aggregatedStats&&n.aggregatedStats.frameHeightStart?n.aggregatedStats.frameHeightStart:e.frameHeight,t.frameWidthStart=n.aggregatedStats&&n.aggregatedStats.frameWidthStart?n.aggregatedStats.frameWidthStart:e.frameWidth),"candidate-pair"==e.type&&e.hasOwnProperty("currentRoundTripTime")&&0!=e.currentRoundTripTime&&(t.currentRoundTripTime=e.currentRoundTripTime)})),n.aggregatedStats=t,n.onAggregatedStats&&n.onAggregatedStats(t)});n.aggregateStatsIntervalId=setInterval((function(){n.getStats(t)}),e)}},b=0,S=1,k=2,x=3,R=5,C=0,T=1,O=2,P=3,E=4,M=1,D=2,A=4,j=8,I=16,L=8,B=16,z=17,U=18,_=253,N=254,W=255,F=0,H={controlScheme:F,suppressBrowserKeys:!0,fakeMouseWithTouches:!1},Q=1,q=50,V=51,J=60,X=61,K=62,Y=70,G=71,Z=72,$=73,ee=74,te=75,ne=80,re=81,oe=82,ie="10001",ae="10004";function se(e){return e>=112&&e<=123||9===e}function ce(e){return e.keyCode===B&&"ShiftRight"===e.code?_:e.keyCode===z&&"ControlRight"===e.code?N:e.keyCode===U&&"AltRight"===e.code?W:e.keyCode}var ue=["action","resBOk","resMsg","sendTm","serial"],le=function(){function e(t){o()(this,e),this.engine=t,this.lastSerial=0}return a()(e,[{key:"name",value:function(){return"ModuleBase"}},{key:"sendMessage",value:function(e,t){this.engine.debug&&console.log("module base send message ",e,JSON.stringify(e)),this.engine.dispatchCustomEvent&&this.engine.dispatchCustomEvent("message",e),this.lastSerial=this.engine.sendMessage(e,t)}},{key:"callbackHandler",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t&&t.length){var r,o;if(3!==t.length)throw new Error("错误的参数格式");r=t[0],null==(o=t[2]).resBOk&&(o.resBOk=!1),null==o.resMsg&&(o.resMsg="");var i={};Object.keys(o).forEach((function(e){ue.includes(e)||(i[e]=o[e])})),r(i)}}},{key:"promisify",value:function(e,t){var n=this;return new Promise((function(r,o){var i,a=[r,o];t&&a.push(t),n.sendMessage(e,(i=n.callbackHandler).bind.apply(i,[null].concat(a)))}))}},{key:"onMessage",value:function(e){return!1}}]),e}(),fe=n(20),de=n.n(fe);function pe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var ve={debug:!1,matchServer:"",directServer:""},ge=function(e){l()(n,e);var t=ye(n);function n(e){var r;o()(this,n),r=t.call(this);var i=Object.assign(ve,e),a=i.dom,s=i.debug,c=i.matchServer,u=i.directServer,l=i.accountId,f=void 0===l?"yiming":l,d=i.size,p=i.useInner,h=i.usePublic,y=i.heartbeatInterval;return r.dom=a,r.debug=s,r.matchServer=c,r.directServer=u,r.accountId=f,null==r.directServer&&(r.directServer=""),r.wsUrl=r.directServer,r.useInner=p,r.usePublic=h,r.heartbeatInterval=y||3e4,r.clientId=10,r.token="",r.reconnectWaitTime=3,r.reconnectTimer=null,r.onConnectionDown=null,r.onConnectionReady=null,r.streamingSize=d||{width:1920,height:1080},r.retryCount=3,r.isReconnect=!1,r.ws=null,r.playerContainer=void 0,r.webRtcPlayerObj=null,r.normalizeAndQuantizeUnsigned=void 0,r.unquantizeAndDenormalizeUnsigned=void 0,r.normalizeAndQuantizeSigned=void 0,r._orientationChangeTimeout=void 0,r.print_stats=!1,r.connect_on_load=!1,r.is_reconnection=!1,r.lastTimeResized=(new Date).getTime(),r.qualityControlOwnershipCheckBox=null,r.matchViewportResolution=!1,r.resizeTimeout=null,r.responseEventListeners=new Map,r.freezeFrameOverlay=null,r.shouldShowPlayOverlay=!0,r.playerElementClientRect=void 0,r.callbackMap=new Map,r.freezeFrame={receiving:!1,size:0,jpeg:void 0,height:0,width:0,valid:!1},r.editTextButton=void 0,r.hiddenInput=void 0,r.rtcLogPanelEl=void 0,r.styleWidth=0,r.styleHeight=0,r.styleTop=0,r.styleLeft=0,r.styleCursor="default",r.styleAdditional="",r.online=!1,r.useMatchMaker=!0,r.useLocalServer=!0,r.VideoEncoderQP="N/A",r.stat={nextMessageSerial:1,lastMessageSerial:0,lastRecivedSerial:0,lastSendTime:0,lastReciveTime:0},r.eventArray=["MeshClick","PopClick","PopBeginHover","PopLeaverHover","Zoom"],r.queueWsPingTimer,r.init(),r}return a()(n,[{key:"checkBrowserVersion",value:function(){return!/Chrome\/94.*/.test(navigator.userAgent)||(console.info("当前浏览器版本暂不支持",navigator.userAgent),!1)}},{key:"updateKickButton",value:function(e){var t=document.getElementsByClassName("kick-other-players-button");t&&t.length&&(t[0].value="Kick (".concat(e,")"))}},{key:"init",value:function(){var e=document.createElement("div");e.style.cssText="position: absolute;width: 100%;height: 100%;z-index: 5;";var t=document.createElement("div");if(this.dom){var n=this.dom.getBoundingClientRect();if(t.className="player",t.style.width="".concat(n.width,"px"),t.style.height="".concat(n.height,"px"),this.playerContainer=t,e.appendChild(t),this.debug){var r=document.createElement("div");r.className="overlay";var o=document.createElement("div");o.className="overlaySettings";var i=document.createElement("div");window.showTextarea=function(){var e=document.getElementById("inputTextDiv");"none"===e.style.display?e.style.display="":e.style.display="none"},window.testEmitUIInteraction=function(){var e=document.getElementById("inputText");if(e.value){var t=null;try{t=JSON.parse(e.value)}catch(e){return console.log("!!! testEmitUIInteraction invalid input json: ".concat(e)),void alert("invalid input json!")}console.log(">>> send message: ".concat(JSON.stringify(t))),window.engine.sendMessage(t)}},window.testCleanScene=function(){window.engine.sendMessage({action:"CleanScene",resetcamera:!0})},i.insertAdjacentHTML("beforeend",'\n        <div>\n          <label title="Show Textarea"\n            style="font-weight:bold; font-size:24px; cursor:pointer" onclick="showTextarea()">\n            +\n          </label>\n          <label title="Show Stats" class="tgl-switch">\n            <input type="checkbox" class="tgl tgl-flat show-stats-tgl">\n            <div class="tgl-slider"></div>\n          </label>\n        </div>\n\n        <div style="margin-bottom: 1em; display: none" id="inputTextDiv">\n          <textarea class="inputText" rows="10" style="resize:vertical; width:98%" type="text"\n            placeholder="json format string" id="inputText"\n          ></textarea>\n\n          <p>\n            <button class="inputText" style="width:120px" onclick="testEmitUIInteraction()">\n              UIInteraction\n            </button>\n            <button class="inputText" style="width:120px" onclick="testCleanScene()">\n              CleanScene\n            </button>\n          </p>\n        </div>\n\n        <div class="statsContainer">\n          <div class="stats">Not Connected</div>\n        </div>\n        '),o.append(i),this.rtcLogPanelEl=i,r.appendChild(o),e.appendChild(r)}this.dom.appendChild(e),this.load()}}},{key:"connect",value:function(){var e=this,t=this.debug;window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket?(e.ws=new WebSocket(this.wsUrl),e.debug&&console.log("connect to server ".concat(e.wsUrl)),e.ws.onopen=function(){e.online=!0},e.ws.onmessage=function(n){var r=JSON.parse(n.data);t&&"config"!==r.type&&console.log("<- SS: ".concat(n.data)),"config"===r.type?e.onConfig(r):"playerCount"===r.type?(t&&console.log("current player: ",r.count-1),e.updateKickButton(r.count-1)):"answer"===r.type?e.onWebRtcAnswer(r):"iceCandidate"===r.type?e.onWebRtcIce(r.candidate):"loginRes"===r.type?e.onLoginRes(r):"send2ue"===r.type&&r.data?e.sendMessage(r.data):t&&console.log("invalid SS message type: ".concat(r.type))},e.ws.onerror=function(e){t&&console.log("WS error: ".concat(JSON.stringify(e)))},e.ws.onclose=function(t){console.log(">>> WS closed: code=".concat(t.code,", reason=").concat(t.reason)),e.ws=void 0,e.is_reconnection=!0,e.online=!1;var n=e.playerContainer;e.webRtcPlayerObj&&(n.removeChild(e.webRtcPlayerObj.video),e.webRtcPlayerObj.close(),e.webRtcPlayerObj=void 0)}):alert("Your browser doesn't support WebSocket")}},{key:"onConfig",value:function(e){var t=this.playerContainer,n=this.setupWebRtcPlayer(t,e);switch(this.resizePlayerStyle(),H.controlScheme){case F:this.registerLockedMouseEvents(n);break;default:this.debug&&console.log("ERROR: Unknown control scheme ".concat(H.controlScheme)),this.registerLockedMouseEvents(n)}}},{key:"setupHtmlEvents",value:function(){var e=this;if(window.addEventListener("resize",this.resizePlayerStyle.bind(this),!0),window.addEventListener("orientationchange",this.onOrientationChange.bind(this)),e.resizePlayerStyle(),window.addEventListener("online",(function(){e.login()})),window.addEventListener("offline",(function(){e.offline(),e.dispatchCustomEvent("ConnectionDown",{data:"网络已断开",code:ae})})),this.debug){var t=this.rtcLogPanelEl.querySelector(".show-stats-tgl");null!==t&&(t.onchange=function(t){e.rtcLogPanelEl.querySelector(".statsContainer").style.display=t.target.checked?"block":"none"})}var n=document.getElementsByClassName("kick-other-players-button");n&&n.length&&(n[0].onclick=function(){e.debug&&console.log("-> SS: kick"),e.ws.send(JSON.stringify({type:"kick"}))})}},{key:"registerKeyboardEvents",value:function(){var e=this,t=this.debug;document.onkeydown=function(n){t&&console.log("key down ".concat(n.keyCode,", repeat = ").concat(n.repeat)),se(n.keyCode)||e.sendInputData(new Uint8Array([J,ce(n),n.repeat]).buffer),n.keyCode===L&&document.onkeypress({charCode:L}),H.suppressBrowserKeys&&se(n.keyCode)&&n.preventDefault()},document.onkeyup=function(n){t&&console.log("key up ".concat(n.keyCode)),se(n.keyCode)||e.sendInputData(new Uint8Array([X,ce(n)]).buffer),H.suppressBrowserKeys&&se(n.keyCode)&&n.preventDefault()},document.onkeypress=function(n){t&&console.log("key press ".concat(n.charCode));var r=new DataView(new ArrayBuffer(3));r.setUint8(0,K),r.setUint16(1,n.charCode,!0),e.sendInputData(r.buffer)}}},{key:"start",value:function(){this.connect_on_load&&!this.is_reconnection||(this.shouldShowPlayOverlay=!0,this.resizePlayerStyle()),this.connect()}},{key:"offline",value:function(){this.online=!1,this.ws&&(this.ws.close(1e3),console.log("调用ws.close"))}},{key:"resize",value:function(){var e=this.dom.getBoundingClientRect();this.controller.setRes(e.width,e.height)}},{key:"setupWebRtcPlayer",value:function(e,t){var n=this,r=this.ws,o=this.qualityControlOwnershipCheckBox,i=this.responseEventListeners,a=this.freezeFrame,s=this.debug;return n.webRtcPlayerObj=new w({peerConnectionOptions:t.peerConnectionOptions,debug:s}),e.appendChild(n.webRtcPlayerObj.video),n.webRtcPlayerObj.onWebRtcOffer=function(e){if(r&&1===r.readyState){if(window.RTCPeerConnection&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")){var t=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.sdp=t}var n=JSON.stringify(e);console.log("-> SS: offer:\n".concat(n)),r.send(n)}},n.webRtcPlayerObj.onWebRtcCandidate=function(e){r&&1===r.readyState&&(s&&console.log("-> SS: iceCandidate\n".concat(JSON.stringify(e,void 0,4))),r.send(JSON.stringify({type:"iceCandidate",candidate:e})))},n.webRtcPlayerObj.onVideoInitialised=function(){if(r&&1===r.readyState&&n.shouldShowPlayOverlay){n.showPlayOverlay(),n.resizePlayerStyle(),n.debug&&console.log("video ready, and send login notify to streamer client"),n.resize();var e=(t=n.resize.bind(n),o=300,i=!1,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];i||(i=!0,setTimeout((function(){t.apply(void 0,n),i=!1}),o))});window.addEventListener("resize",e),"function"==typeof n.onConnectionReady&&n.onConnectionReady&&n.onConnectionReady(),window.engine=n,n.dispatchCustomEvent("ConnectionReady","success")}var t,o,i},n.webRtcPlayerObj.onDataChannelConnected=function(){r&&1===r.readyState&&n.showTextOverlay("WebRTC connected, waiting for video")},n.webRtcPlayerObj.onDataChannelMessage=function(e){var t=new Uint8Array(e);if(a.receiving){var r=new Uint8Array(a.jpeg.length+t.length);r.set(a.jpeg,0),r.set(t,a.jpeg.length),a.jpeg=r,a.jpeg.length===a.size?(a.receiving=!1,a.valid=!0,s&&console.log("received complete freeze frame ".concat(a.size))):a.jpeg.length>a.size?(console.error("received bigger freeze frame than advertised: ".concat(a.jpeg.length,"/").concat(a.size)),a.jpeg=void 0,a.receiving=!1):s&&console.log("received next chunk (".concat(t.length," bytes) of freeze frame: ").concat(a.jpeg.length,"/").concat(a.size))}else if(t[0]===b){var c=0!==t[1];null!==o&&(o.disabled=c,o.checked=c)}else if(t[0]===S){var u=new TextDecoder("utf-16").decode(e.slice(1));try{var l=JSON.parse(u);console.log("parsedResponse: ",l);var f,d=pe(i.entries());try{for(d.s();!(f=d.n()).done;){var p=v()(f.value,2),h=p[0],y=p[1];n.eventArray.includes(h)?l.action.toLowerCase()===h.toLowerCase()&&y(u):y(u)}}catch(e){d.e(e)}finally{d.f()}}catch(e){console.error("parse response error: ",e)}}else if(t[0]===k){var g=new TextDecoder("utf-16").decode(e.slice(1));s&&console.log(g);var m=JSON.parse(g);"onScreenKeyboard"===m.command&&n.showOnScreenKeyboard(m)}else t[0]===x?(a.size=new DataView(t.slice(1,5).buffer).getInt32(0,!0),a.jpeg=t.slice(5),a.jpeg.length<a.size?(s&&console.log("received first chunk of freeze frame: ".concat(a.jpeg.length,"/").concat(a.size)),a.receiving=!0):s&&console.log("received complete freeze frame: ".concat(a.jpeg.length,"/").concat(a.size))):t[0]===R&&(n.VideoEncoderQP=new TextDecoder("utf-16").decode(e.slice(1)))},n.registerInputs(n.webRtcPlayerObj.video),n.createWebRtcOffer(),n.webRtcPlayerObj.video}},{key:"resizePlayerStyle",value:function(){var e=this.playerContainer,t=this.dom.getBoundingClientRect();e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e&&(this.updateVideoStreamSize(),e.classList.contains("fixed-size")||(this.resizePlayerStyleToActualSize(e),this.playerElementClientRect=e.getBoundingClientRect(),this.setupNormalizeAndQuantize()))}},{key:"onOrientationChange",value:function(){var e=this;clearTimeout(e._orientationChangeTimeout),e._orientationChangeTimeout=setTimeout((function(){e.resizePlayerStyle()}),500)}},{key:"setupNormalizeAndQuantize",value:function(){var e=this.debug,t=this.playerContainer,n=t.getElementsByTagName("video");if(t&&n.length>0){var r=t.clientHeight/t.clientWidth,o=n[0].videoHeight/n[0].videoWidth;if(r>o){e&&console.log("Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio");var i=r/o;this.normalizeAndQuantizeUnsigned=function(e,n){var r=e/t.clientWidth,o=i*(n/t.clientHeight-.5)+.5;return r<0||r>1||o<0||o>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*r,y:65536*o}},this.unquantizeAndDenormalizeUnsigned=function(e,n){var r=(n/65536-.5)/i+.5;return{x:e/65536*t.clientWidth,y:r*t.clientHeight}},this.normalizeAndQuantizeSigned=function(e,n){return{x:32767*(e/(.5*t.clientWidth)),y:32767*(i*n/(.5*t.clientHeight))}}}else{e&&console.log("Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio");var a=o/r;this.normalizeAndQuantizeUnsigned=function(e,n){var r=a*(e/t.clientWidth-.5)+.5,o=n/t.clientHeight;return r<0||r>1||o<0||o>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*r,y:65536*o}},this.unquantizeAndDenormalizeUnsigned=function(e,n){var r=n/65536;return{x:((e/65536-.5)/a+.5)*t.clientWidth,y:r*t.clientHeight}},this.normalizeAndQuantizeSigned=function(e,n){return{x:32767*(a*e/(.5*t.clientWidth)),y:32767*(n/(.5*t.clientHeight))}}}}}},{key:"updateVideoStreamSize",value:function(){var e=this.debug;if(this.matchViewportResolution)if((new Date).getTime()-this.lastTimeResized>1e3){if(!this.playerContainer)return;this.lastTimeResized=(new Date).getTime()}else e&&console.log("Resizing too often - skipping"),clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.updateVideoStreamSize.bind(this),1e3)}},{key:"emitUIInteraction",value:function(e){this.emitDescriptor(q,e)}},{key:"emitCommand",value:function(e){this.emitDescriptor(V,e)}},{key:"emitDescriptor",value:function(e,t){var n=JSON.stringify(t),r=new DataView(new ArrayBuffer(3+2*n.length)),o=0;r.setUint8(o,e),o++,r.setUint16(o,n.length,!0),o+=2;for(var i=0;i<n.length;i++)r.setUint16(o,n.charCodeAt(i),!0),o+=2;this.sendInputData(r.buffer)}},{key:"sendInputData",value:function(e){var t=this.webRtcPlayerObj;t&&t.send(e)}},{key:"requestQualityControl",value:function(){this.sendInputData(new Uint8Array([Q]).buffer)}},{key:"showPlayOverlay",value:function(){var e=this.webRtcPlayerObj;e&&e.video.play(),this.requestQualityControl(),this.shouldShowPlayOverlay=!1}},{key:"registerTouchEvents",value:function(e){var t=this,n=this.debug,r=[9,8,7,6,5,4,3,2,1,0],o={};function i(e){var t=r.pop();void 0===t&&n&&console.log("exhausted touch indentifiers"),o[e.identifier]=t}function a(r,i){var a=new DataView(new ArrayBuffer(2+6*i.length));a.setUint8(0,r),a.setUint8(1,i.length);for(var s=2,c=0;c<i.length;c++){var u=i[c],l=u.clientX-e.offsetLeft,f=u.clientY-e.offsetTop;n&&console.log("F".concat(o[u.identifier],"=(").concat(l,", ").concat(f,")"));var d=t.normalizeAndQuantizeUnsigned(l,f);a.setUint16(s,d.x,!0),s+=2,a.setUint16(s,d.y,!0),s+=2,a.setUint8(s,o[u.identifier],!0),s+=1,a.setUint8(s,255*u.force,!0),s+=1}t.sendInputData(a.buffer)}if(H.fakeMouseWithTouches){var s=void 0;e.ontouchstart=function(n){if(void 0===s){var r=n.changedTouches[0];s={id:r.identifier,x:r.clientX-t.playerElementClientRect.left,y:r.clientY-t.playerElementClientRect.top},e.onmouseenter(n),t.emitMouseDown(C,s.x,s.y)}n.preventDefault()},e.ontouchend=function(n){for(var r=0;r<n.changedTouches.length;r++){var o=n.changedTouches[r];if(o.identifier===s.id){var i=o.clientX-t.playerElementClientRect.left,a=o.clientY-t.playerElementClientRect.top;t.emitMouseUp(C,i,a),e.onmouseleave(n),s=void 0;break}}n.preventDefault()},e.ontouchmove=function(e){for(var n=0;n<e.touches.length;n++){var r=e.touches[n];if(r.identifier===s.id){var o=r.clientX-t.playerElementClientRect.left,i=r.clientY-t.playerElementClientRect.top;t.emitMouseMove(o,i,o-s.x,i-s.y),s.x=o,s.y=i;break}}e.preventDefault()}}else e.ontouchstart=function(e){for(var t=0;t<e.changedTouches.length;t++)i(e.changedTouches[t]);n&&console.log("touch start"),a(ne,e.changedTouches),e.preventDefault()},e.ontouchend=function(e){n&&console.log("touch end"),a(re,e.changedTouches);for(var t=0;t<e.changedTouches.length;t++)i=e.changedTouches[t],r.push(o[i.identifier]),delete o[i.identifier];var i;e.preventDefault()},e.ontouchmove=function(e){n&&console.log("touch move"),a(oe,e.touches),e.preventDefault()}}},{key:"registerLockedMouseEvents",value:function(e){var t=this,n=0,r=0,o=function(e){n=e.offsetX,r=e.offsetY,this.emitMouseMove(n,r,e.movementX,e.movementY)}.bind(t);e.addEventListener("mousemove",o,!1),e.onmousedown=function(e){t.emitMouseDown(e.button,n,r)},e.onmouseup=function(e){t.emitMouseUp(e.button,n,r)},e.onmousewheel=function(e){t.emitMouseWheel(e.wheelDelta,n,r)},e.pressMouseButtons=function(e){t.pressMouseButtons(e.buttons,n,r)},e.releaseMouseButtons=function(e){t.releaseMouseButtons(e.buttons,n,r)}}},{key:"registerInputs",value:function(e){e&&(this.registerMouseEnterAndLeaveEvents(e),this.registerTouchEvents(e))}},{key:"emitMouseDown",value:function(e,t,n){var r=this.normalizeAndQuantizeUnsigned(t,n),o=new DataView(new ArrayBuffer(6));o.setUint8(0,Z),o.setUint8(1,e),o.setUint16(2,r.x,!0),o.setUint16(4,r.y,!0),this.sendInputData(o.buffer)}},{key:"emitMouseUp",value:function(e,t,n){var r=this.normalizeAndQuantizeUnsigned(t,n),o=new DataView(new ArrayBuffer(6));o.setUint8(0,$),o.setUint8(1,e),o.setUint16(2,r.x,!0),o.setUint16(4,r.y,!0),this.sendInputData(o.buffer)}},{key:"emitMouseMove",value:function(e,t,n,r){var o=this.normalizeAndQuantizeUnsigned(e,t),i=this.normalizeAndQuantizeSigned(n,r),a=new DataView(new ArrayBuffer(9));a.setUint8(0,ee),a.setUint16(1,o.x,!0),a.setUint16(3,o.y,!0),a.setInt16(5,i.x,!0),a.setInt16(7,i.y,!0),this.sendInputData(a.buffer)}},{key:"emitMouseWheel",value:function(e,t,n){var r=this.normalizeAndQuantizeUnsigned(t,n),o=new DataView(new ArrayBuffer(7));o.setUint8(0,te),o.setInt16(1,e,!0),o.setUint16(3,r.x,!0),o.setUint16(5,r.y,!0),this.sendInputData(o.buffer)}},{key:"releaseMouseButtons",value:function(e,t,n){e&M&&this.emitMouseUp(C,t,n),e&D&&this.emitMouseUp(O,t,n),e&A&&this.emitMouseUp(T,t,n),e&j&&this.emitMouseUp(P,t,n),e&I&&this.emitMouseUp(E,t,n)}},{key:"pressMouseButtons",value:function(e,t,n){e&M&&this.emitMouseDown(C,t,n),e&D&&this.emitMouseDown(O,t,n),e&A&&this.emitMouseDown(T,t,n),e&j&&this.emitMouseDown(P,t,n),e&I&&this.emitMouseDown(E,t,n)}},{key:"registerMouseEnterAndLeaveEvents",value:function(e){var t=this;e.onmouseenter=function(n){t.debug;var r=new DataView(new ArrayBuffer(1));r.setUint8(0,Y),t.sendInputData(r.buffer),e.pressMouseButtons(n)},e.onmouseleave=function(n){t.debug;var r=new DataView(new ArrayBuffer(1));r.setUint8(0,G),t.sendInputData(r.buffer),e.releaseMouseButtons(n)}}},{key:"showOnScreenKeyboard",value:function(e){var t=this.editTextButton,n=this.hiddenInput;if(e.showOnScreenKeyboard){t.classList.remove("hiddenState");var r=this.unquantizeAndDenormalizeUnsigned(e.x,e.y);t.style.top=r.y.toString()+"px",t.style.left=(r.x-40).toString()+"px"}else t.classList.add("hiddenState"),n.blur()}},{key:"showTextOverlay",value:function(e){var t=document.createElement("div");t.id="messageOverlay",t.innerHTML=e||""}},{key:"createWebRtcOffer",value:function(){var e=this.webRtcPlayerObj,t=this.debug;e?(t&&console.log("Creating offer"),this.showTextOverlay("Starting connection to server, please wait"),e.createOffer()):(t&&console.log("WebRTC player not setup, cannot create offer"),this.showTextOverlay("Unable to setup video"))}},{key:"onWebRtcAnswer",value:function(e){var t=this,n=this.webRtcPlayerObj,r=this.ws;n.receiveAnswer(e);var o=3e5;n.onAggregatedStats=function(e){if(t.debug){for(var n=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0}),i=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0,minimumIntegerDigits:2}),a="",s=(e.timestamp-e.timestampStart)/1e3,c=[],u=[60,60],l=0;l<u.length;l++)c.push(s%u[l]),s/=u[l];c.push(s);for(var f=c[0],d=Math.floor(c[1]),p=Math.floor([c[2]]),h="B",y=e.hasOwnProperty("bytesReceived")?e.bytesReceived:0,v=["kB","MB","GB"],g=0;g<v.length&&!(y<1e5);g++)y/=1e3,h=v[g];a+="Duration: ".concat(i.format(p),":").concat(i.format(d),":").concat(i.format(f),"</br>"),a+="Video Resolution: ".concat(e.hasOwnProperty("frameWidth")&&e.frameWidth&&e.hasOwnProperty("frameHeight")&&e.frameHeight?e.frameWidth+"x"+e.frameHeight:"N/A","</br>"),a+="Received (".concat(h,"): ").concat(n.format(y),"</br>"),a+="Frames Decoded: ".concat(e.hasOwnProperty("framesDecoded")?n.format(e.framesDecoded):"N/A","</br>"),a+="Packets Lost: ".concat(e.hasOwnProperty("packetsLost")?n.format(e.packetsLost):"N/A","</br>"),a+="Bitrate (kbps): ".concat(e.hasOwnProperty("bitrate")?n.format(e.bitrate):"N/A","</br>"),a+="Framerate: ".concat(e.hasOwnProperty("framerate")?n.format(e.framerate):"N/A","</br>"),a+="Frames dropped: ".concat(e.hasOwnProperty("framesDropped")?n.format(e.framesDropped):"N/A","</br>"),a+="Latency (ms): ".concat(e.hasOwnProperty("currentRoundTripTime")?n.format(1e3*e.currentRoundTripTime):"N/A","</br>");var m=t.rtcLogPanelEl.querySelector(".stats");m&&(m.innerHTML=a)}t.print_stats&&e.timestampStart&&e.timestamp-e.timestampStart>o&&(r&&1===r.readyState&&(t.debug&&console.log("-> SS: stats\n".concat(JSON.stringify(e))),r.send(JSON.stringify({type:"stats",data:e}))),o+=3e5)},n.aggregateStats(1e3)}},{key:"onWebRtcIce",value:function(e){var t=this.webRtcPlayerObj;t&&t.handleCandidateFromServer(e)}},{key:"resizePlayerStyleToActualSize",value:function(e){var t=this.styleCursor,n=this.styleAdditional,r=this.dom.getBoundingClientRect(),o=r.width,i=r.height,a=e.childNodes&&e.childNodes[0];a&&"VIDEO"===a.tagName&&(a.width=o,a.height=i),e.style="top: 0px; left: 0px; width: "+o+"px; height: "+i+"px; margin-left: 0px; margin-top: 0px; cursor: "+t+"; "+n}},{key:"addResponseEventListener",value:function(e,t){this.responseEventListeners.set(e,t)}},{key:"removeResponseEventListener",value:function(e){this.responseEventListeners.remove(e)}},{key:"sendMessage",value:function(e,t){return this.stat.lastMessageSerial=this.stat.nextMessageSerial++,this.stat.lastSendTime=(new Date).getTime(),e.serial=this.stat.lastMessageSerial,e.sendTm=this.stat.lastSendTime,t&&this.callbackMap.set(this.stat.lastMessageSerial,t),this.emitUIInteraction(e),e.serial}},{key:"destroy",value:function(){this.playerContainer.remove(),this.ws&&this.ws.close(),this.queueWs&&this.queueWs.close(),window.engine=null}},{key:"setAccountId",value:function(e){this.accountId=e}},{key:"getAccountId",value:function(){return this.accountId}},{key:"clearQueueWsPingTimer",value:function(){window.clearInterval(this.queueWsPingTimer)}},{key:"login",value:function(){var e=this;this.online&&this.offline();var t=!0;(null==this.matchServer||0==this.matchServer.length||this.directServer&&this.directServer.length>0)&&(t=!1);var n=function(t,n){e.dispatchCustomEvent("ConnectionDown",{data:n,code:t})};if(t){var r="".concat(this.matchServer,"/api/auth/client/create_player?userId=").concat(this.accountId);de.a.post("".concat(r)).then((function(t){var r=t.data;if(r.data&&0===r.code){var o=r.data;e.wsUrl=o.token?e.token2wsUrl(o.token):o.wsUrl,e.playerId=o.playerId,e.streamerId=o.streamerId,e.start()}else n(ie,"引擎服务资源未成功获取")})).catch((function(e){n(ie,"引擎服务资源未成功获取")}))}else this.start()}},{key:"token2wsUrl",value:function(e){var t=new URL(window.location.href.replace("https","wss").replace("http","ws"));return"".concat(t.protocol,"//").concat(t.host,"/ws/player?token=").concat(e)}},{key:"dispatchCustomEvent",value:function(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))}},{key:"handleEngineEvent",value:function(e,t){try{var n=JSON.parse(t);if(n){var r={};Object.keys(n).forEach((function(e){ue.includes(e)||(r[e]=n[e])})),this.dispatchCustomEvent(e,r)}}catch(e){console.error(e)}}},{key:"load",value:function(){var e=this;this.setupHtmlEvents(),this.registerKeyboardEvents(),this.addResponseEventListener("engine",this.onMessage.bind(this,this.callbackMap)),this.eventArray.forEach((function(t){e.addResponseEventListener(t,e.handleEngineEvent.bind(e,t))})),this.login()}}]),n}(m()(EventTarget));function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var we=function(e){l()(n,e);var t=me(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"info",value:function(){return this.promisify({action:"info"})}},{key:"getProps",value:function(){return this.promisify({action:"camera.getprops"})}},{key:"setProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.promisify({action:"camera.setprops",props:e})}},{key:"flyTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,o=arguments.length>4?arguments[4]:void 0,i={action:"flyTo",location:e,time:n,speed:r,rotation:t};return o&&(i.Offseted=o),this.promisify(i)}},{key:"lookAt",value:function(e){var t=e.id,n=e.objType,r=e.offset,o=e.flytime,i=void 0===o?4:o,a=e.speed,s=void 0===a?50:a,c=e.distancelerp,u=e.location,l={action:"lookAt",id:t,Click:"false",flytime:i,speed:s};return n&&(l.objType=n),r&&(l.Offset=r),void 0!==c&&(l.distancelerp=c),void 0!==u&&(l.location=u),this.promisify(l)}},{key:"startRotate",value:function(){var e=3,t={action:"startRoate"};if(0===arguments.length)t.Speed=e;else if(1===arguments.length)t.Point=arguments.length<=0?void 0:arguments[0];else{if(2!==arguments.length)throw new Error("错误的参数格式");t.Point=arguments.length<=0?void 0:arguments[0],t.Speed=arguments.length<=1?void 0:arguments[1]}return this.promisify(t)}},{key:"stopRotate",value:function(){return this.promisify({action:"stopRoate"})}},{key:"setLookDistance",value:function(e,t){var n={action:"setLookDistance",Min:e,Max:t};return this.promisify(n)}},{key:"flyLinesTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1?arguments[1]:void 0,n={action:"flyLinesTo",speed:e};return t&&(n.playtime=t,delete n.speed),this.promisify(n)}},{key:"setFlyStop",value:function(){return this.promisify({action:"setFlyStop"})}},{key:"setFlyResume",value:function(){return this.promisify({action:"setFlyResume"})}},{key:"setFlyClear",value:function(){return this.promisify({action:"setFlyClear"})}},{key:"specialFly",value:function(e){var t={action:"SpecialFly",flylinesname:e,speed:1};return this.promisify(t)}},{key:"stopSpecialFly",value:function(){return this.promisify({action:"SetSpecialFlyClear"})}}]),n}(le);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Se=function(e){l()(n,e);var t=be(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"setBounds",value:function(e,t,n,r){return this.promisify({action:"coordinate.setbounds",ueMin:e,ueMax:n,gisMin:t,gisMax:r})}},{key:"ueToGis",value:function(e){return this.promisify({action:"UeToGisList",uetogislist:e})}},{key:"gdToGis",value:function(e){return this.promisify({action:"NewGisToUEGisList",NewGisToUEGis:e})}}]),n}(le),ke=n(7),xe=n.n(ke),Re=n(9),Ce=n.n(Re);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){xe()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Ee=function(e){l()(n,e);var t=Pe(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"name",value:function(){return"marker"}},{key:"onMessage",value:function(e){switch(e.action){case"marker.create":console.log("marker create result",e)}return!1}},{key:"create",value:function(e,t,n,r,o,i){console.log("create marker",e,t);var a={action:"marker.create",type:e,location:t,icon:n,mesh:r,particle:o,text:i};return this.promisify(a)}},{key:"createPop",value:function(e){var t=e.objId,n=e.location,r=e.firstlevel,o=e.secondlevel,i=Ce()(e,["objId","location","firstlevel","secondlevel"]),a=Oe(Oe({},{offsetVector:{X:0,Y:0,Z:100},popname:"测试标牌",webuisize:{X:0,Y:0},webuioffset:{X:0,Y:0},fronsize:14,breakdown:!1,hadWebClick:!0,visibleheight:200}),i),s={};if(t)s.objId=t;else{if(!n)throw new Error("objId和location不能同时为空");s.location=n}if(!r)throw new Error("firstlevel不能为空");if(!o)throw new Error("secondlevel不能为空");var c=Oe(Oe({action:t?"marker.createpopbyid":"marker.createpop",firstlevel:r,secondlevel:o},s),a);return this.promisify(c)}},{key:"editPop",value:function(e){var t=Oe({action:"marker.editpop",popid:e.popId},Ce()(e,["popId"]));return this.promisify(t)}},{key:"edit",value:function(e,t,n,r,o,i){console.log("edit marker",e);var a={action:"marker.edit",id:e,location:t,icon:n,mesh:r,particle:o,text:i};return this.promisify(a)}},{key:"getall",value:function(e){console.log("getall marker",e);var t={action:"marker.getall",type:e};return this.promisify(t)}},{key:"getinfo",value:function(e){console.log("getinfo marker",e);var t={action:"marker.getinfo",id:e};return this.promisify(t)}},{key:"addModelTerrainZ",value:function(e){var t=e.type,n=e.objId,r=e.objType,o=void 0===r?"":r,i=e.fontStyle,a=void 0===i?{}:i,s=e.effectScale,c={action:"marker.addModelTerrainZ",objType:o,objId:n,effectStyle:t,effectScale:void 0===s?1:s,EffectTipMeshType:"line",fontStyle:Oe({name:"火情预警",markerbgHigh:10,isAutoScale:!1,styleScale:.6,fontColor:"FFFFFF",isBold:!0,fontSize:26,showHigh:200},a)};return this.promisify(c)}},{key:"addModelTerrainLOC",value:function(e){var t=e.type,n=e.location,r=e.objType,o=void 0===r?"":r,i=e.fontStyle,a=void 0===i?{}:i,s=e.effectScale,c={action:"marker.addModelTerrainLOC",objType:o,location:n,effectStyle:t,effectScale:void 0===s?1:s,EffectTipMeshType:"line",fontStyle:Oe({name:"火情预警",markerbgHigh:10,isAutoScale:!1,styleScale:.6,fontColor:"FFFFFF",isBold:!0,fontSize:26,showHigh:200},a)};return this.promisify(c)}},{key:"clearAllEffect",value:function(){return this.promisify({action:"marker.clearAllEffect"})}},{key:"clearEffectByType",value:function(e){return this.promisify({action:"marker.clearEffectByType",types:e})}},{key:"remove",value:function(e){return this.promisify({action:"marker.remove",id:e})}},{key:"clearByType",value:function(e){return this.promisify({action:"marker.clearByType",types:Array.isArray(e)?e:[e]})}},{key:"clearAll",value:function(){return this.promisify({action:"marker.clearAll"})}},{key:"switchPopTextVisible",value:function(e,t){return this.promisify({action:"marker.ShowFontByType",types:e,Fontstatus:t})}}]),n}(le);function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var De=function(e){l()(n,e);var t=Me(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"name",value:function(){return"layer"}},{key:"onMessage",value:function(e){console.log("msg",e)}},{key:"showLayer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o={action:"showLayer",objTypes:e.map((function(e){return{objType:e}})),Visible:t,type:n,duration:r};return this.promisify(o)}},{key:"getAllLayers",value:function(){return this.promisify({action:"getAllLayers"})}},{key:"getLayerMeshs",value:function(e){var t={action:"getLayerMeshs",objType:e};return this.promisify(t)}},{key:"changeHotMap",value:function(e){var t={action:"changeHotMap",drawPosArrays:e};return this.promisify(t)}},{key:"QuitchangeHotMap",value:function(){return this.promisify({action:"QuitchangeHotMap"})}},{key:"changeHotMap_XF",value:function(e){var t={action:"changeHotMap",drawPosArrays:e.drawPosArrays,Tag:"Hotmap",leftup:e.leftup,leftdown:e.leftdown,rightup:e.rightup,rightdown:e.rightdown};return this.promisify(t)}},{key:"QuitchangeHotMap_XF",value:function(){return this.promisify({action:"QuitchangeHotMap",Tag:"Hotmap"})}},{key:"openVideoTour",value:function(e){var t={action:"openVideoTour",idList:e,type:"common"};return this.promisify(t)}},{key:"closeVideoTour",value:function(){return this.promisify({action:"closeVideoTour"})}},{key:"showBoundaryProtection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t={action:"ShowBoundaryProtection"};return e&&1!==e&&(t.action="ShowBoundaryProtection".concat(e)),this.promisify(t)}},{key:"hideBoundaryProtection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t={action:"QuitBoundaryProtection"};return e&&1!==e&&(t.action="QuitBoundaryProtection".concat(e)),this.promisify(t)}},{key:"showBoundaryProtectionById",value:function(e){return this.promisify({action:"ShowBoundaryProtection",effectid:e})}},{key:"hideBoundaryProtectionById",value:function(e){return this.promisify({action:"QuitBoundaryProtection",effectid:e})}},{key:"showFireProtection",value:function(){return this.promisify({action:"FireProtection"})}},{key:"hideFireProtection",value:function(){return this.promisify({action:"QuitFireProtection"})}},{key:"showRegionDivision",value:function(){return this.promisify({action:"ShowRegionDivision"})}},{key:"hideRegionDivision",value:function(){return this.promisify({action:"QuitRegionDivision"})}},{key:"findObjByTag",value:function(e){var t={action:"FindObjByTag",uid:e};return this.promisify(t)}},{key:"showRoadEffect",value:function(){return this.promisify({action:"ShowRoadEffect"})}},{key:"hideRoadEffect",value:function(){return this.promisify({action:"QuitRoadEffect"})}},{key:"showPhotovoltaicSolar",value:function(){return this.promisify({action:"ShowSolarPowered"})}},{key:"hidePhotovoltaicSolar",value:function(){return this.promisify({action:"QuitSolarPowered"})}},{key:"showLowEnergyBuilding",value:function(){return this.promisify({action:"ShowLowEnergyBuilding"})}},{key:"hideLowEnergyBuilding",value:function(){return this.promisify({action:"QuitLowEnergyBuilding"})}},{key:"showHealthyRunway",value:function(){return this.promisify({action:"ShowRunWay"})}},{key:"hideHealthyRunway",value:function(){return this.promisify({action:"QuitShowRunWay"})}},{key:"showWifi",value:function(){return this.promisify({action:"ShowWifi"})}},{key:"hideWifi",value:function(){return this.promisify({action:"QuitShowWifi"})}},{key:"ShowMaintain",value:function(){return this.promisify({action:"ShowMaintain"})}},{key:"QuitMaintain",value:function(){return this.promisify({action:"QuitMaintain"})}},{key:"ShowEfftectScreen",value:function(e){return this.promisify({action:"ShowEfftectScreen",screenId:e})}},{key:"QuitEfftectScreen",value:function(e){return this.promisify({action:"QuitEfftectScreen",screenId:e})}},{key:"ShowSplineQueue",value:function(){return this.promisify({action:"ShowSplineQueue"})}},{key:"QuitSplineQueue",value:function(){return this.promisify({action:"QuitSplineQueue"})}},{key:"setTouristPatrol",value:function(e){var t=e.data,n=e.tag,r=e.modelType,o=e.firstPopType,i=e.secondPopType,a=e.title;return this.promisify({action:"SetTouristPatrol",SetMultiPointsArray:t,Tag:n,Modeltype:r,FirstPoptype:o,SecondPoptype:i,PopName:a,Status:"0"})}},{key:"clearTouristPatrolId",value:function(e){return this.promisify({action:"ClearTouristPatrolId",Tag:e})}},{key:"clearTouristPatrolAll",value:function(){return this.promisify({action:"ClearTouristPatrolAll"})}},{key:"showShopColor",value:function(){return this.promisify({action:"ShowSpaheColor"})}},{key:"hideShopColor",value:function(){return this.promisify({action:"QuitSpaheColor"})}},{key:"switchLight",value:function(e,t){return this.promisify({action:"LightSwitch",lightid:e,lightswitch:t})}},{key:"showLightLine",value:function(){return this.promisify({action:"ShowLightLine"})}},{key:"hideLightLine",value:function(){return this.promisify({action:"QuitLightLine"})}},{key:"showSpecialEffect",value:function(e){return this.promisify({action:"ShowSpecialEffect",effectid:e})}},{key:"hideSpecialEffect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.promisify({action:"QuitSpecialEffect",effectid:e})}},{key:"splineNavigateLookAt",value:function(e){return this.promisify({action:"SplineNavigateLookAt",splineid:e})}},{key:"quitNavigateLookAt",value:function(){return this.promisify({action:"QuitNavigateLookAt"})}},{key:"showCompass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.promisify({action:"ShowCompass",translationx:e,translationy:t,scaleoverlay:n})}},{key:"hideCompass",value:function(){return this.promisify({action:"QuitCompass"})}},{key:"elevateHouse",value:function(e){return this.promisify({action:"ElevateHouse",firstTag:e})}},{key:"layDownHouse",value:function(e){return this.promisify({action:"LayDownHouse",firstTag:e})}},{key:"showClockInArea",value:function(){return this.promisify({action:"ShowClockInArea"})}},{key:"hideClockInArea",value:function(){return this.promisify({action:"QuitClockInArea"})}},{key:"showInventedArea",value:function(){return this.promisify({action:"ShowInventedArea"})}},{key:"quitInventedArea",value:function(){return this.promisify({action:"QuitInventedArea"})}},{key:"showSideWalk",value:function(){return this.promisify({action:"ShowSideWalk"})}},{key:"hideSideWalk",value:function(){return this.promisify({action:"QuitSideWalk"})}}]),n}(le);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var je=function(e){l()(n,e);var t=Ae(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).panStatus=!0,r.zoomStatus=!0,r.rotateStatus=!0,r.clickStatus=!0,r.rightClickStatus=!0,r}return a()(n,[{key:"enablePan",value:function(){var e={action:"enablePan",enablePan:!this.panStatus};return this.panStatus=!this.panStatus,this.promisify(e)}},{key:"enableZoom",value:function(){var e={action:"enableZoom",enableZoom:!this.zoomStatus};return this.zoomStatus=!this.zoomStatus,this.promisify(e)}},{key:"enableRotate",value:function(){var e={action:"enableRotate",enableRotate:!this.rotateStatus};return this.rotateStatus=!this.rotateStatus,this.promisify(e)}},{key:"enableClick",value:function(){var e={action:"enableClick",enableClick:!this.clickStatus};return this.clickStatus=!this.clickStatus,this.promisify(e)}},{key:"enableRightClick",value:function(){var e={action:"enableRightClick",enableRightClick:!this.rightClickStatus};return this.rightClickStatus=!this.rightClickStatus,this.promisify(e)}},{key:"setUILevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this.promisify({action:"SetUILevel",UILevel:e})}},{key:"setRes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1920,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1080,n=3840,r=2160;return this.promisify({action:"SetRes",setres:"r.setres ".concat(e>n?n:e,"x").concat(t>r?r:t,"w")})}},{key:"moveLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputWeekLeft",weekspeed:e})}},{key:"moveRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputWeekRight",weekspeed:e})}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputWeekUp",weekspeed:e})}},{key:"moveBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputWeekDown",weekspeed:e})}},{key:"rotateLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputRotateLeft",rotatespeed:e})}},{key:"rotateRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputRotateRight",rotatespeed:e})}},{key:"rotateUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputRotateUp",rotatespeed:e})}},{key:"rotateDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.promisify({action:"InputRotateDown",rotatespeed:e})}},{key:"zoomIn",value:function(){return this.promisify({action:"SetScaleUp"})}},{key:"zoomOut",value:function(){return this.promisify({action:"SetScaleDown"})}},{key:"changeCharacter",value:function(){return this.promisify({action:"ChangeCharacter",switchover:!0})}},{key:"recoverCharacter",value:function(){return this.promisify({action:"RecoverCharacter",switchover:!0})}}]),n}(le);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Le=function(e){l()(n,e);var t=Ie(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"openBuild",value:function(e){var t={action:"openBuild",buildingname:e};return this.promisify(t)}},{key:"closeBuild",value:function(e){var t={action:"closeBuild",buildingname:e};return this.promisify(t)}},{key:"showLifeShowroom",value:function(){return this.promisify({action:"ShowLifeShowroom"})}},{key:"hideLifeShowroom",value:function(){return this.promisify({action:"QuitLifeShowroom"})}},{key:"goInner",value:function(e){var t={action:"goInner",storey:e};return this.promisify(t)}},{key:"goOut",value:function(){return this.promisify({action:"goOut"})}},{key:"initModelMove",value:function(e){var t=e.license,n=e.isModelIn,r=e.time,o=e.stayTime,i=e.parkingNo,a={action:"initModelMove",isModelIn:n,licene:t,curtime:r,carlineid:e.carlineid,parkingNo:i,site:e.site};return n||(a.staytime=o),this.promisify(a)}},{key:"clearCarModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={action:"clearCarModel",carclearstatus:e};return this.promisify(t)}},{key:"setCarVisible",value:function(e,t){var n={action:"setCarVisible",idList:e,visible:t};return this.promisify(n)}},{key:"setCarAllReset",value:function(){return this.promisify({action:"setCarAllReset"})}},{key:"showCarAll",value:function(){return this.promisify({action:"ShowCarAll"})}},{key:"showElevator",value:function(){return this.promisify({action:"ShowElevator"})}},{key:"quitShowElevator",value:function(){return this.promisify({action:"QuitShowElevator"})}},{key:"ShowStaticHotMap",value:function(){return this.promisify({action:"ShowStaticHotMap"})}},{key:"QuitStaticHotMap",value:function(){return this.promisify({action:"QuitStaticHotMap"})}}]),n}(le);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var ze=function(e){l()(n,e);var t=Be(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"name",value:function(){return"Navigation"}},{key:"setMultiPoints",value:function(e){var t={action:"setMultiPoints",SetMultiPointsArray:e,lineWidth:1,defaultPoint:!1};return this.promisify(t)}},{key:"setObjPoints",value:function(e){var t={action:"setObjPoints",lineWidth:1,defaultPoint:!1,height:.20000000298023224,idList:e.map((function(e){return{objType:e.objType,id:e.id,pid:"0000"}}))};return this.promisify(t)}},{key:"setClear",value:function(){return this.promisify({action:"setClear"})}}]),n}(le);function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var _e=function(e){l()(n,e);var t=Ue(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"version",value:function(){return this.promisify({action:"scene.getversion"})}},{key:"toDaytime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t={action:"toDaytime",Time:e};return this.promisify(t)}},{key:"toNight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t={action:"toNight",Time:e};return this.promisify(t)}},{key:"cleanScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={action:"CleanScene",resetcamera:!!e};return this.promisify(t)}},{key:"roomflyLinesTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.promisify({action:"roomflyLinesTo",speed:e})}}]),n}(le);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var We=function(e){l()(n,e);var t=Ne(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"showCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={action:"input.showCursor",bShow:e,cursorType:t};return this.promisify(n)}}]),n}(le);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){xe()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var qe=function(e){l()(n,e);var t=Qe(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"Setkubots",value:function(){return this.promisify({action:"Setkubots",kubotId:"test01",theta:0,mapPosition:{X:121.16942515867386,Y:28.852055782550494,Z:0},agvsstatus:{Agvstheta:60,flexdis:0,upHeight:1},packbasket:[{Agvspack:1},{Agvspack:0},{Agvspack:1},{Agvspack:1},{Agvspack:1}]})}},{key:"ShowWorkbin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return this.promisify({action:"ShowWorkbin",boxid:e})}},{key:"QuitWorkbin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return this.promisify({action:"QuitWorkbin",boxid:e})}},{key:"SetAgvbots",value:function(){return this.promisify({action:"SetAgvbots",agvId:"test01",theta:90,mapPosition:{X:121.16942515867386,Y:28.852055782550494,Z:0},flexdis:0,upHeight:90})}},{key:"FactoryStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.promisify(He({action:"FactoryStream"},e))}}]),n}(le);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Je=function(e){l()(n,e);var t=Ve(n);function n(e){return o()(this,n),t.call(this,e)}return a()(n,[{key:"ShowNavigationPath",value:function(e){return this.promisify(e)}}]),n}(le);function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var Ke=function(e){l()(n,e);var t=Xe(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).modules=new Map,r.camera=new we(c()(r)),r.marker=new Ee(c()(r)),r.coordinate=new Se(c()(r)),r.layer=new De(c()(r)),r.controller=new je(c()(r)),r.inner=new Le(c()(r)),r.navigation=new ze(c()(r)),r.scene=new _e(c()(r)),r.input=new We(c()(r)),r.machineMaker=new qe(c()(r)),r.path=new Je(c()(r)),r.modules.set("camera",r.camera),r.modules.set("marker",r.marker),r.modules.set("coordinate",r.coordinate),r.modules.set("layer",r.layer),r.modules.set("controller",r.controller),r.modules.set("inner",r.inner),r.modules.set("navigation",r.navigation),r.modules.set("scene",r.scene),r.modules.set("input",r.input),r.modules.set("machineMaker",r.machineMaker),r.modules.set("path",r.path),r}return a()(n,[{key:"getModuleByName",value:function(e){return this.modules.get(e)}},{key:"onMessage",value:function(e,t){var n=JSON.parse(t),r=n.serial,o=e.get(r);o&&o(n)}},{key:"kick",value:function(){this.ws.send(JSON.stringify({type:"kick"}))}}]),n}(ge);t.default=Ke}])}));
